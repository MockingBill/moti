<div class="layui-row">
        <div class="layui-col-md2">
            <blockquote class="layui-elem-quote news_search">

                <div class="layui-inline">
                    <a class="layui-btn layui-btn-primary catalogAdd_btn"><i class="layui-icon">&#xe654;</i>新增</a>

                </div>
                <div class="layui-inline">
                    <a class="layui-btn layui-btn-primary catalogEdit_btn"><i class="layui-icon">&#xe642;</i>修改</a>

                </div>

            </blockquote>
            <div style="height:550px; overflow: auto;">
                <ul id="catalogtree" lay-filter="menutreefilter"></ul>
            </div>
        </div>
        <div class="layui-col-md10">
            <blockquote class="layui-elem-quote news_search">
                <div class="layui-inline">
                    <div class="layui-input-inline layui-form">
                        <select id="page_menu_sysid" name="page_menu_sysid" lay-filter="sysSelect">
                            <option value="" ></option>
                        </select>
                    </div>
                </div>
            <div class="layui-inline">
                <div class="layui-input-inline">
                    <input type="text" value="" placeholder="参数名称" class="layui-input search_input">
                </div>
                <a class="layui-btn layui-btn-primary search_btn"><i class="layui-icon">&#xe615;</i>查询</a>
            </div>
            <div class="layui-inline">

                <a class="layui-btn layui-btn-primary rest_btn"><i class="layui-icon">&#xe65c;</i>重置</a>
            </div>
            <div class="layui-inline">
                <a class="layui-btn layui-btn-primary paramAdd_btn"><i class="layui-icon">&#xe654;</i>新增</a>
            </div>
            <div class="layui-inline">
                <a class="layui-btn layui-btn-primary paramEdit_btn"><i class="layui-icon">&#xe642;</i>修改</a>
            </div>

                <div class="layui-inline">
                    <a class="layui-btn layui-btn-primary toAuthority_btn"><i class="layui-icon">&#x1002;</i>同步</a>

                </div>

        </blockquote>
            <div class="layui-form news_list">
                <table class="layui-hide" id="param_datagrid" lay-data="{id: 'param_datagrid'}" lay-filter="TableFilter"></table>
            </div>
        </div>
</div>

<!--param addmodel-->
<div id="param_model" class="page_model" style="display:none;">
    <div class="layui-show">
        <div class="layui-form layui-form-pane">
            <form id="menu_form" method="post" style="padding: 5px; line-height: 5px;">
                <div class="layui-form-item">
                    <div class="layui-inline">
                        <label  class="layui-form-label" >所属系统</label>
                        <div class="layui-input-inline">
                            <select id="param_sysid" name="param_sysid" lay-filter="pMenuSwitch">
                                <option value="" ></option>
                            </select>
                        </div>
                    </div>
                    <div class="layui-inline">
                        <label class="layui-form-label">类别<span style="color:red">*</span></label>
                        <div class="layui-input-inline">
                            <div class="layui-unselect layui-form-select downpanel" >
                                <div class="layui-select-title" onclick="openSelectTree()">
                                    <span class="layui-input layui-unselect" id="treeclass" ></span>
                                    <input type="hidden" name="param_catalogid" id="param_catalogid">
                                    <i class="layui-edge"></i>
                                </div>
                                <dl class="layui-anim layui-anim-upbit">
                                    <dd>
                                        <ul id="catalogselecttree"></ul>
                                    </dd>
                                </dl>
                            </div>
                        </div>
                    </div>

                </div>
                <div class="layui-form-item">
                    <div class="layui-inline">
                        <label  class="layui-form-label" >参数名<span style="color: red">*</span></label>
                        <div class="layui-input-inline">
                            <input type="text" id="param_name" name="param_name" required lay-verify="required" autocomplete="off" placeholder="菜单编码" class="layui-input" >
                        </div>
                    </div>
                    <div class="layui-inline">
                        <label  class="layui-form-label" >状态</label>
                        <div class="layui-input-inline">
                            <select id="param_status" name="param_status">
                                <option value="1" selected>正常</option>
                                <option value="0" >禁用</option>
                            </select>
                        </div>
                    </div>
                </div>

                <div class="layui-form-item layui-form-text">
                    <label class="layui-form-label">参数值<span style="color: red">*</span></label>
                    <div class="layui-input-block" >
                        <textarea id="param_val" name="param_val" required lay-verify="required" placeholder="参数值" class="layui-textarea" rows="2"></textarea>
                    </div>
                </div>
                <div class="layui-form-item layui-form-text">
                    <label class="layui-form-label">备注</label>
                    <div class="layui-input-block" >
                        <textarea id="param_desc" name="param_desc" placeholder="备注" class="layui-textarea" rows="2"></textarea>
                    </div>
                </div>

                <div class="layui-form-item page-form-btn">
                    <button class="layui-btn" id="form_submit_btn" lay-filter="form_submit_btn" lay-submit>确定</button>
                </div>
            </form>
        </div>
    </div>
</div>

<!--catalog addmodel-->
<div id="catalog_model" class="page_model" style="display:none;">
    <div class="layui-show">
        <div class="layui-form layui-form-pane">
            <form id="menu_form" method="post" style="padding: 5px; line-height: 5px;">
                <div class="layui-form-item">
                    <div class="layui-inline">
                        <label  class="layui-form-label" >所属系统</label>
                        <div class="layui-input-block">
                            <select id="catalog_sysid" name="catalog_sysid" lay-filter="pMenuSwitch">
                                <option value="" ></option>
                            </select>
                        </div>
                    </div>
                    <div class="layui-inline">
                        <label  class="layui-form-label" >类别名称<span style="color: red">*</span></label>
                        <div class="layui-input-block">
                            <input type="text" id="catalog_name" name="catalog_name" required lay-verify="required" autocomplete="off" placeholder="类别名称" class="layui-input" >
                        </div>
                    </div>
                </div>

                <div class="layui-form-item layui-form-text">
                    <label class="layui-form-label">备注</label>
                    <div class="layui-input-block" >
                        <textarea id="catalog_remark" name="catalog_remark" placeholder="备注" class="layui-textarea" rows="2"></textarea>
                    </div>
                </div>

                <div class="layui-form-item page-form-btn">
                    <button class="layui-btn" id="form_submit_btn2" lay-filter="form_submit_btn2" lay-submit>确定</button>
                </div>
            </form>
        </div>
    </div>
</div>

<script type="text/html" id="statusTpl">
    {{#out '{{d.param_status == 1 ? "正常" : "禁用"}}'}}{{/out}}
</script>

<script>

    layui.use(['table','form','jquery','tree','layer'], function(){
        var table = layui.table;
        var form = layui.form;
        var $ = layui.$;
        var layer=layui.layer;
        var menuMap={};
        var currentSys;
        var currentSysId;
        var currentCatalog={};
        table.render({
            elem: '#param_datagrid'
            ,id: 'param_datagrid'
            ,url:'{{projcfg.base}}/param/list.do'
            ,height: '{{projcfg.page_config.height}}'
            //,cellMinWidth: 10 //全局定义常规单元格的最小宽度，layui 2.2.1 新增
            ,cols: [[
                {type:'numbers'},
                {type:'checkbox'},
                {field:'param_catalog_name', title: '参数分类',width:200,align:'left'},
                {field:'param_name', title: '参数名称',width:200,align:'left'}
                ,{field:'param_val', title: '参数值',width:250,align:'left'}
                ,{field:'param_status', title: '状态',width:80,toolbar: '#statusTpl',align:'left'}
                ,{field:'param_desc', title: '备注',align:'left'}
            ]]
            ,page: true
            ,done: function(res, curr, count) {
                signleSelect($, 'param_datagrid');
            }
        });

        //页面系统列表初始化
        $.ajax({
            url:'{{projcfg.base}}/common/syslist.do',
            type:'get',
            success:function (res) {
                $('#page_menu_sysid').html('');
                var items=res.data;
                for(var i in items){
                    $('#page_menu_sysid').append('<option value =\"' + items[i].id + '\">' + items[i].sys_name + '</option>');
                    form.render('select');
                }
                $('#page_menu_sysid').get(0).selectedIndex=0;
                //获取系统id的菜单
                var sys_id=$('#page_menu_sysid').val();
                var sys_name=$('#page_menu_sysid').find("option:selected").text();
                currentSys=sys_name;
                currentSysId=sys_id;
                menuMap[sys_id]=sys_name;
                //系统菜单表格初始化
                table.reload('param_datagrid',{
                    url: '{{projcfg.base}}/param/switchsys.do',
                    where:{param_sysid:sys_id}
                })

                //类别列表初始化
                $.ajax({
                    url:'{{projcfg.base}}/param/catalogList.do',
                    type:'get',
                    success:function (res) {
                        var items=res.data;
                        //初始化菜单map
                        for(var i in items){
                            menuMap[items[i].catalog_id]=items[i].catalog_name;
                        }
                    }
                });

                //菜单树形目录初始化
                $.ajax({
                    url:'{{projcfg.base}}/param/catalogtree.do',
                    type:'get',
                    data:{'sysid':sys_id},
                    success:function (res) {
                        layui.tree({
                            elem:'#catalogtree',
                            nodes:JSON.parse(res.data),
                            click:function (node) {
                                if(node.hasOwnProperty('sys_id')){
                                    currentCatalog.catalog_id=node.id;
                                    table.reload('param_datagrid',{
                                        url: '{{projcfg.base}}/param/treeNode.do',
                                        where:{param_catalogid:'',param_sysid:node.sys_id}
                                    })
                                }else{
                                    currentCatalog=node;
                                    currentCatalog.catalog_id=node.id;
                                    table.reload('param_datagrid',{
                                        url: '{{projcfg.base}}/param/treeNode.do',
                                        where:{param_catalogid:node.catalog_id,param_sysid:node.catalog_sysid}
                                    })
                                }
                            }
                        });
                    }
                });

                //select tree
                $.ajax({
                    url:'{{projcfg.base}}/param/catalogtree.do',
                    type:'get',
                    data:{'sysid':sys_id},
                    success:function (res) {
                        layui.tree({
                            elem:'#catalogselecttree',
                            nodes:JSON.parse(res.data),
                            click:function (node) {
                                $('#param_catalogid').val(node.id);
                                var $select=$($(this)[0].elem).parents(".layui-form-select");
                                $select.removeClass("layui-form-selected").find(".layui-select-title span").html(node.name);
                            }
                        });
                    }
                });

            }
        });

        /*$(".downpanel").on("click",".layui-select-title",function(e) {
            $(".layui-form-select").not($(this).parents(".layui-form-select")).removeClass("layui-form-selected");
            $(this).parents(".downpanel").toggleClass("layui-form-selected");
            layui.stope(e);
        }).on("click","dl i",function(e) {
            layui.stope(e);
        });*/

        //获取系统列表
        $.ajax({
            url:'{{projcfg.base}}/common/syslist.do',
            type:'get',
            success:function (res) {
                $('#param_sysid').html('');
                var items=res.data;
                for(var i in items){
                    $('#param_sysid').append('<option value =\"' + items[i].id + '\">' + items[i].sys_name + '</option>');
                    form.render('select');
                }
                $('#param_sysid').get(0).selectedIndex=0;
            }
        });

        $.ajax({
            url:'{{projcfg.base}}/common/syslist.do',
            type:'get',
            success:function (res) {
                $('#catalog_sysid').html('');
                var items=res.data;
                for(var i in items){
                    $('#catalog_sysid').append('<option value =\"' + items[i].id + '\">' + items[i].sys_name + '</option>');
                    form.render('select');
                }
                $('#catalog_sysid').get(0).selectedIndex=0;
            }
        });




        //系统切换
        form.on('select(sysSelect)',function (data) {
            var sys_id=data.value;
            var sys_name=$('#page_menu_sysid').find("option:selected").text();
            currentSys=sys_name;
            currentSysId=sys_id;
            menuMap[sys_id]=sys_name;
            refresh(sys_id);
        });

        function refresh(sys_id) {
            //数据表格切换
            table.reload('param_datagrid',{
                url: '{{projcfg.base}}/param/switchsys.do',
                where:{param_sysid:sys_id}
            })

            //类别列表切换
            $.ajax({
                url:'{{projcfg.base}}/param/catalogList.do',
                type:'get',
                success:function (res) {
                    var items=res.data;
                    //初始化菜单map
                    for(var i in items){
                        menuMap[items[i].catalog_id]=items[i].catalog_name;
                    }
                }
            });

            //类别树形目录切换
            $.ajax({
                url:'{{projcfg.base}}/param/catalogtree.do',
                type:'get',
                data:{'sysid':sys_id},
                success:function (res) {
                    $('#catalogtree').empty();
                    layui.tree({
                        elem:'#catalogtree',
                        nodes:JSON.parse(res.data),//res.data,//
                        click:function (node) {
                            if(node.hasOwnProperty('sys_id')){
                                currentCatalog.catalog_id=node.id;
                                table.reload('param_datagrid',{
                                    url: '{{projcfg.base}}/param/treeNode.do',
                                    where:{param_catalogid:'',param_sysid:node.sys_id}
                                })
                            }else{
                                currentCatalog=node;
                                currentCatalog.catalog_id=node.id;
                                table.reload('param_datagrid',{
                                    url: '{{projcfg.base}}/param/treeNode.do',
                                    where:{param_catalogid:node.catalog_id,param_sysid:node.catalog_sysid}
                                })
                            }
                        }
                    });
                }
            });

            //select tree 切换
            $('#catalogselecttree').empty();

            $.ajax({
                url:'{{projcfg.base}}/param/catalogtree.do',
                type:'get',
                data:{'sysid':sys_id},
                success:function (res) {
                    layui.tree({
                        elem:'#catalogselecttree',
                        nodes:JSON.parse(res.data),
                        click:function (node) {
                            $('#param_catalogid').val(node.id);
                            var $select=$($(this)[0].elem).parents(".layui-form-select");
                            $select.removeClass("layui-form-selected").find(".layui-select-title span").html(node.name);
                        }
                    });
                }
            });
        }

        //监听锁定操作
        form.on('checkbox(lock)', function(obj){
            console.log(obj);
            layer.tips(this.value + ' ' + this.name + '：'+ obj.elem.checked, obj.othis);
            var account_status='';

            var account_name= this.value;
            if(obj.elem.checked){
                account_status = 2;
            }else {
                account_status = 1;
            }
            var loading = layer.load(1);
            // alert(user_status);
            $.ajax({
                url: "{{projcfg.base}}/admin/lock.json",
                data: {account_name:account_name,account_status:account_status},
                method: 'POST',
                success: function (res) {

                    if (res.success) {
                        layer.close(loading);
                        layer.msg(res.msg, {icon: 6, time: 2000}, function () {

                        });
                    }
                    else {
                        layer.close(loading);
                        layer.msg(res.msg, {icon: 5});
                    }
                },
                error: function () {
                    layer.close(loading);
                    layer.msg("设置账号禁用状态失败", {icon: 5});
                }
            });
        });

        //增加菜单系统更换,父菜单跟着变
        form.on('select(pMenuSwitch)',function (data) {
            var sys_id=data.value;
            $('#catalogselecttree').empty();
            $.ajax({
                url:'{{projcfg.base}}/param/catalogtree.do',
                type:'get',
                data:{'sysid':sys_id},
                success:function (res) {
                    layui.tree({
                        elem:'#catalogselecttree',
                        nodes:JSON.parse(res.data),
                        click:function (node) {
                            $('#param_catalogid').val(node.id);
                            var $select=$($(this)[0].elem).parents(".layui-form-select");
                            $select.removeClass("layui-form-selected").find(".layui-select-title span").html(node.name);
                        }
                    });
                }
            });

        })

        //新增参数
        $(".paramAdd_btn").click(function(){
            openLayer(layui.layer, {
                title: '新增参数',     //显示标题
                area: ['680px', '500px'], //宽高
                content:  $('#param_model'),
                success: function(layero, index){
                    form.render();

                    //提交
                    form.on('submit(form_submit_btn)', function(data){
                        var loading = layer.load(1);
                        $.ajax({
                            url: "{{projcfg.base}}/param/save.do",
                            data: data.field, //请求的附加参数
                            method: 'POST',
                            success: function (res) {
                                if(res.success) {
                                    layer.close(loading);
                                    layer.closeAll();
                                    layer.msg(res.msg, { icon: 6, time: 2000 }, function () {
                                        var sys_id=$('#param_sysid').val();
                                        $('#page_menu_sysid').val(sys_id);
                                        form.render('select');
                                        refresh(sys_id);
                                        $(".layui-select-title span").html('');
                                        clear(data.field);
                                    });
                                }
                                else {
                                    layer.close(loading);
                                    layer.msg(res.msg, { icon: 5 });
                                }
                            },
                            error: function () {
                                layer.close(loading);
                                layer.msg("新建参数失败", { icon: 5 });
                            }
                        });
                        return false;
                    });
                }
            }, '#form_submit_btn');
        });

        //新增参数类别
        $(".catalogAdd_btn").click(function(){
            openLayer(layui.layer, {
                title: '新增类别',     //显示标题
                area: ['680px', '300px'], //宽高
                content:  $('#catalog_model'),
                success: function(layero, index){
                    form.render();

                    //提交
                    form.on('submit(form_submit_btn2)', function(data){
                        var loading = layer.load(1);
                        $.ajax({
                            url: "{{projcfg.base}}/param/catalog/save.do",
                            data: data.field, //请求的附加参数
                            method: 'POST',
                            success: function (res) {
                                if(res.success) {
                                    layer.close(loading);
                                    layer.closeAll();
                                    layer.msg(res.msg, { icon: 6, time: 2000 }, function () {
                                        //刷新类别菜单
                                        $.ajax({
                                            url:'{{projcfg.base}}/param/catalogtree.do',
                                            type:'get',
                                            data:{'sysid':data.field.catalog_sysid},
                                            success:function (res) {
                                                $('#catalogtree').empty();
                                                layui.tree({
                                                    elem:'#catalogtree',
                                                    nodes:JSON.parse(res.data),//res.data,//
                                                    click:function (node) {
                                                        if(node.hasOwnProperty('sys_id')){
                                                            currentCatalog.catalog_id=node.id;
                                                            table.reload('param_datagrid',{
                                                                url: '{{projcfg.base}}/param/treeNode.do',
                                                                where:{param_catalogid:'',param_sysid:node.sys_id}
                                                            })
                                                        }else{
                                                            currentCatalog=node;
                                                            currentCatalog.catalog_id=node.id;
                                                            table.reload('param_datagrid',{
                                                                url: '{{projcfg.base}}/param/treeNode.do',
                                                                where:{param_catalogid:node.catalog_id,param_sysid:node.catalog_sysid}
                                                            })
                                                        }
                                                    }
                                                });
                                            }
                                        });
                                    });
                                }
                                else {
                                    layer.close(loading);
                                    layer.msg(res.msg, { icon: 5 });
                                }
                            },
                            error: function () {
                                layer.close(loading);
                                layer.msg("新建参数类别失败", { icon: 5 });
                            }
                        });
                        return false;
                    });
                }
            }, '#form_submit_btn2');
        });

        //修改
        $(".paramEdit_btn").click(function () {
            /*$('#addparam_btn').hide();
            $('#editparam_btn').show();*/
            var checkStatus = table.checkStatus('param_datagrid');
            if (checkStatus.data.length != 1) {
                layer.msg("请选择一条数据。", {icon: 5});
            }else{
                var menudata=checkStatus.data;

                openLayer(layui.layer, {
                    title: '修改参数',     //显示标题
                    area: ['680px', '500px'], //宽高
                    content:  $('#param_model'),
                    btn2: function(index, layero){
                        $('#param_catalogname').val('');
                        $(".layui-select-title span").html('');
                        clear(menudata[0]);
                        layer.close(index);
                    },
                    cancel:function (index,layero) {
                        $('#param_catalogname').val('');
                        $(".layui-select-title span").html('');
                        clear(menudata[0]);
                        layer.close(index);
                    },
                    // 窗口加载成功后调用
                    success: function(layero, index) {

                        getDataWithSelectTree(menudata[0]);
                        //监听提交
                        form.on('submit(form_submit_btn)', function(formdata){
                            formdata.field.param_id=menudata[0].param_id;
                            var loading = layer.load(1);
                            $.ajax({
                                url: "{{projcfg.base}}/param/modify.do",
                                data: formdata.field, //请求的附加参数，用json对象
                                method: 'POST',
                                success: function (res) {
                                    if(res.success) {
                                        layer.close(loading);
                                        layer.closeAll();
                                        layer.msg(res.msg, { icon: 6, time: 2000 }, function () {
                                            var sys_id=$('#param_sysid').val();
                                            $('#page_menu_sysid').val(sys_id);
                                            form.render('select');
                                            refresh(sys_id);
                                            $(".layui-select-title span").html('');
                                            clear(menudata[0]);
                                        });
                                    }
                                    else {
                                        layer.close(loading);
                                        layer.msg(res.msg, { icon: 5 });
                                    }
                                },
                                error: function () {
                                    layer.close(loading);
                                    layer.msg("修改参数失败", { icon: 5 });
                                }
                            });
                            return false;
                        });
                    }
                }, '#form_submit_btn');
            }
        })
        $(".catalogEdit_btn").click(function () {
            /*$('#addcatalog_btn').hide();
            $('#editcatalog_btn').show();*/
            console.log('currentCatalog',currentCatalog);
            if(currentCatalog.catalog_id>0){
                getData(currentCatalog);
                openLayer(layui.layer, {
                    title: '修改参数',     //显示标题
                    area: ['680px', '300px'], //宽高
                    content:  $('#catalog_model'),
                    btn2: function(index, layero){
                        clear(currentCatalog);
                        layer.close(index);
                    },
                    cancel:function (index,layero) {
                        clear(currentCatalog);
                        layer.close(index);
                    },
                    // 窗口加载成功后调用
                    success: function(layero, index) {
                        //监听提交
                        form.on('submit(form_submit_btn2)', function(formdata){
                            formdata.field.catalog_id=currentCatalog.catalog_id;
                            var loading = layer.load(1);
                            $.ajax({
                                url: "{{projcfg.base}}/param/catalog/modify.do",
                                data: formdata.field, //请求的附加参数，用json对象
                                method: 'POST',
                                success: function (res) {
                                    if(res.success) {
                                        layer.close(loading);
                                        layer.closeAll();
                                        layer.msg(res.msg, { icon: 6, time: 2000 }, function () {
                                            clear(currentCatalog);
                                            $.ajax({
                                                url:'{{projcfg.base}}/param/catalogtree.do',
                                                type:'get',
                                                data:{'sysid':currentCatalog.catalog_sysid},
                                                success:function (res) {
                                                    $('#catalogtree').empty();
                                                    layui.tree({
                                                        elem:'#catalogtree',
                                                        nodes:JSON.parse(res.data),//res.data,//
                                                        click:function (node) {
                                                            if(node.hasOwnProperty('sys_id')){
                                                                currentCatalog.catalog_id=node.id;
                                                                table.reload('param_datagrid',{
                                                                    url: '{{projcfg.base}}/param/treeNode.do',
                                                                    where:{param_catalogid:'',param_sysid:node.sys_id}
                                                                })
                                                            }else{
                                                                currentCatalog=node;
                                                                currentCatalog.catalog_id=node.id;
                                                                table.reload('param_datagrid',{
                                                                    url: '{{projcfg.base}}/param/treeNode.do',
                                                                    where:{param_catalogid:node.catalog_id,param_sysid:node.catalog_sysid}
                                                                })
                                                            }
                                                        }
                                                    });
                                                }
                                            });
                                        });
                                    }
                                    else {
                                        layer.close(loading);
                                        layer.msg(res.msg, { icon: 5 });
                                    }
                                },
                                error: function () {
                                    layer.close(loading);
                                    layer.msg("修改类别失败", { icon: 5 });
                                }
                            });
                            return false;
                        });
                    }
                }, '#form_submit_btn2');
            }else{
                layer.msg("请选择一条数据,再进行修改。", {icon: 5});
            }
        })

        //回填数据修改 id与键一致
        function getData(data) {
            for(var k in data){
                $('#'+k).val(data[k]);
            }
            form.render();
        }

        function getDataWithSelectTree(data) {
            //获取上级机构
            $.ajax({
                url:'{{projcfg.base}}/param/parentname.do',
                type:'POST',
                data: {param_catalogid:data.param_catalogid},
                success:function (res) {
                    for (var k in res){
                        $(".layui-select-title span").html(res[k].catalog_name);
                    }
                }
            });

            for(var k in data){
                $('#'+k).val(data[k]);
            }
            form.render();
        }

        //清空表单
        function clear(data) {
            for(var k in data){
                $('#'+k).val('');
            }
            form.render();
        }

        //查询
        $(".search_btn").click(function(){
            var param_name = $(".search_input").val();
            if($(".search_input").val() != ''){
                table.reload('param_datagrid',{
                    where: { //设定异步数据接口的额外参数，任意设
                        param_name:param_name,
                    },
                    page: {
                        curr: 1 //重新从第 1 页开始
                    }
                });
            }else{
                layer.msg("请输入需要查询的内容");
            }
        })
        //重置
        $(".rest_btn").click(function(){
            $(".search_input").val("");
            table.reload('param_datagrid',{
                where: { //设定异步数据接口的额外参数，任意设
                    param_name:'',
                },
                page: {
                    curr: 1 //重新从第 1 页开始
                }
            });
        })
    });
</script>